package spring.main;

import java.util.Scanner;

import spring.assembler.Assembler;
import spring.service.MemberRegisterService;
import spring.vo.RegisterRequest;

public class MainForAssembler {

	static Scanner scan = new Scanner(System.in);
	
	public static void main(String[] args) {
		// 회원가입 기능을 만들어 봅시다
		
		while(true) {
			menu();
			String selectMenu = scan.nextLine();
			
			if(selectMenu.equals("0")) {
				System.out.println("프로그램을 종료합니다."); 
				break;
			}else if(selectMenu.equals("1")) {  // 회원 가입 기능
				processNewCommand();
			}else if(selectMenu.equals("2")) {  // 비밀번호 변경 기능
				processChangeCommand();
			}else {
				System.out.println("잘 못 입력했습니다. \n다시 확인하세요.");
			}
		}
		
	}
	
	private static Assembler asssemble = new Assembler(); // 
			// 컨테이너 : 빈(bean) 객체를 생성, 조립후 반환

	private static void processNewCommand() {
		// 회원 가입 기능
		System.out.println("회원 가입을 진행합니다.");
		System.out.println("이메일");
		String email = scan.nextLine();
		System.out.println("이름");
		String name = scan.nextLine();
		System.out.println("비밀번호");
		String password = scan.nextLine();
		System.out.println("비밀번호 확인");
		String confirmPassword = scan.nextLine();
		
		// 입력 받은 정보를 한꺼번에 묶어서 처리하기 위한 VO객체 : RegisterRequest
		RegisterRequest reg = new RegisterRequest();
		reg.setEmail(email);
		reg.setName(name);
		reg.setPassword(password);
		reg.setConfirmPassword(confirmPassword);
		
		if(!reg.isPasswordEqualToConfirmPassword()) { // 입력 비밀번호와 확인 비밀번호를 체크
			System.out.println("비밀번호와 확인 비밀번호가 일치하지 않습니다.");
			return;
		}
		
		// 실제적으로 회원 가입 처리
		MemberRegisterService regSvc = asssemble.getRegSvc();
		
		regSvc.regist(reg);
		
		
		
	}

	private static void menu() {
		System.out.println("메뉴를 선택하세요.");
		System.out.println("1. 회원 가입");
		System.out.println("2. 비밀번호 변경");
		System.out.println("0. 프로그램 종료");
		
	}

}
